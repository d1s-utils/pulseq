<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:with="desc=${@statisticService.getStatisticsFormatted()}">

    <title>Pulseq</title>
    <meta name="title" content=" Pulseq ">
    <meta name="description" th:content="${desc}">

    <meta property="og:type" content="website">
    <meta property="og:url" th:content="${baseUrl}">
    <meta property="og:title" content="Pulseq">
    <meta property="og:description" th:content="${desc}">
    <meta property="og:image"
          content="/pulseq.png">

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" th:content="${baseUrl}">
    <meta property="twitter:title" content="Pulseq">
    <meta property="twitter:description" th:content="${desc}">
    <meta property="twitter:image"
          content="/pulseq.png">

    <meta property="theme-color" th:content="${themeColor}">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.halo.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script>
        <!-- Thanks, heartbeat -->
        window.onload = function () {
            setInterval(updateInfo, 1000)
        }

        async function updateInfo() {
            const response = await fetch("/api/statistic");
            const data = await response.json();

            for (const it of data) {
                await setInfo(it)
            }
        }

        async function setInfo(data) {
            document.getElementById(`title-${data.identify}`).innerHTML = data.title
            document.getElementById(`description-${data.identify}`).innerHTML = data.description
        }
    </script>
</head>
<body id="vanta">
<div class="container justify-content-center">
    <img src="https://media.discordapp.net/attachments/726559155548061757/904041640866508860/21_1.png?width=902&height=507"
         alt="pulseq-logo" class="center-block"/>
</div>
<div class="container">
    <div class="card border-success text-white text-center bg-dark">
        <div class="card-body">
            <h5 class="card-title" th:text="'Welcome to ' + ${globalConfigurationProperties.serverName} + '.'">Welcome</h5>
            <p class="card-text">This web page shows when I was last online from all my devices (pressed the key,
                clicked on the phone
                screen, etc.), one beat represents a successful request from the device to the server, here are some
                data that
                may be interesting.</p>
            <p class="card-footer">
                Running on version <code th:text="${globalConfigurationProperties.version}">version</code> of <a
                    th:href="${globalConfigurationProperties.repository}">Pulseq</a>
                <br>
                Want this for yourself? See the <a th:href="${globalConfigurationProperties.repository} + '/wiki'">docs</a>!
            </p>
        </div>
    </div>
    <div class="row justify-content-center">
        <div th:each="stat : ${@statisticService.getAllStatistics()}" class="col-sm-6">
            <div class="card border-success text-white bg-dark">
                <div class="card-body">
                    <h5 th:id="'title-' + ${stat.identify}" class="card-title">
                        <span class="spinner-grow text-success" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </span>
                    </h5>
                    <p th:id="'description-' + ${stat.identify}" class="card-text"></p>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<style>
    body {
        height: 100vh;
        background-color: #131a43;
    }

    .card {
        margin: 20px;
    }

    img {
        width: 50%;
    }

    .center-block {
        display: block;
        margin-right: auto;
        margin-left: auto;
    }

    .info {
        width: 50%;
    }
</style>
<script>
    VANTA.HALO({
        el: "#vanta",
        mouseControls: false,
        touchControls: false,
        gyroControls: false,
        minHeight: 200.00,
        minWidth: 200.00,
        size: 0.60
    })
</script>
</html>